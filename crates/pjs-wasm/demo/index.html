<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PJS WASM Demo - Priority JSON Streaming</title>
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>PJS WASM Demo</h1>
            <p class="subtitle">Priority JSON Streaming Protocol - WebAssembly Edition</p>

            <!-- Transport Switcher -->
            <div class="transport-switcher">
                <label class="transport-option">
                    <input type="radio" name="transport" value="wasm" checked>
                    <span class="transport-label">
                        <span class="transport-icon">‚ö°</span>
                        <span>WASM (Local)</span>
                    </span>
                </label>
                <label class="transport-option">
                    <input type="radio" name="transport" value="http-mock">
                    <span class="transport-label">
                        <span class="transport-icon">üåê</span>
                        <span>HTTP Mock</span>
                    </span>
                </label>
            </div>
        </header>

        <!-- Performance Comparison Widget -->
        <section class="comparison-panel panel">
            <div class="panel-title">
                <span>üìä</span> Performance Comparison
            </div>
            <button id="benchmarkBtn" class="btn btn-benchmark">‚ñ∂ Run Benchmark</button>
            <div id="comparisonResults" class="comparison-results">
                <div class="comparison-message">Click "Run Benchmark" to compare performance</div>
            </div>
        </section>

        <!-- Real-time Metrics Display -->
        <section class="metrics-panel panel">
            <div class="panel-title">
                <span>üìà</span> Real-time Metrics
            </div>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-label">Memory Usage</div>
                    <div id="metricMemory" class="metric-value">-</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Throughput</div>
                    <div id="metricThroughput" class="metric-value">-</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Time to First Frame</div>
                    <div id="metricTTFF" class="metric-value">-</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Progress</div>
                    <div id="metricProgress" class="metric-value">-</div>
                </div>
            </div>
            <div class="progress-bar-container">
                <div id="progressBar" class="progress-bar"></div>
            </div>
        </section>

        <!-- Main Demo Grid -->
        <div class="demo-grid">
            <div class="panel">
                <div class="panel-title">
                    <span>üìù</span> JSON Input
                </div>

                <!-- Sample Data Presets -->
                <div class="preset-selector">
                    <label for="presetSelect">Sample Data:</label>
                    <select id="presetSelect" class="preset-select">
                        <option value="custom">Custom</option>
                        <option value="small">Small (1KB) - User Profile</option>
                        <option value="medium" selected>Medium (10KB) - Product Catalog</option>
                        <option value="large">Large (100KB) - Analytics Data</option>
                    </select>
                </div>

                <textarea id="jsonInput" class="input-area" placeholder="Enter JSON here or select a preset..."></textarea>
                <div class="input-info">
                    <span id="inputSize" class="input-size">0 bytes</span>
                </div>

                <div class="controls">
                    <button id="streamBtn" class="btn btn-primary">‚ñ∂ Stream Frames</button>
                    <button id="clearBtn" class="btn btn-secondary">Clear</button>
                    <select id="prioritySelect" class="priority-select">
                        <option value="10">All (Background+)</option>
                        <option value="25">Low+</option>
                        <option value="50" selected>Medium+</option>
                        <option value="80">High+</option>
                        <option value="100">Critical only</option>
                    </select>
                </div>

                <div class="keyboard-hints">
                    <span class="hint">‚èé Enter to stream</span>
                    <span class="hint">Esc to clear</span>
                </div>
            </div>

            <div class="panel">
                <div class="panel-title">
                    <span>üì¶</span> Streaming Frames
                    <span id="streamingStatus" class="streaming-status"></span>
                </div>
                <div id="output" class="output-area">
                    <div class="empty-state">
                        Click "Stream Frames" to begin streaming
                    </div>
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #8b5cf6"></div>
                        <span>Skeleton</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--critical)"></div>
                        <span>Critical (100)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--high)"></div>
                        <span>High (80)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--medium)"></div>
                        <span>Medium (50)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--low)"></div>
                        <span>Low (25)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--background)"></div>
                        <span>Background (10)</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics Panel -->
        <div class="stats-panel">
            <div class="stat-card">
                <div id="statFrames" class="stat-value">-</div>
                <div class="stat-label">Total Frames</div>
            </div>
            <div class="stat-card">
                <div id="statPatches" class="stat-value">-</div>
                <div class="stat-label">Patch Frames</div>
            </div>
            <div class="stat-card">
                <div id="statBytes" class="stat-value">-</div>
                <div class="stat-label">Bytes Processed</div>
            </div>
            <div class="stat-card">
                <div id="statTime" class="stat-value">-</div>
                <div class="stat-label">Duration (ms)</div>
            </div>
        </div>

        <footer>
            <div id="version" class="version">Loading PJS WASM...</div>
        </footer>
    </div>

    <script type="module" src="./app.js"></script>
</body>
</html>
